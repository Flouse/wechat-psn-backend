本文作为对：[《CaaS国内服务商测评》][1]一文的补充。

如果开发一个web应用，若脚本语言，则有dev——testenv——stgenv——prodenv的上线过程；若非脚本语言，则有dev——devtest——ci——testenv——stgenv——prodenv的上线过程。这里仅就前一种情况进行阐述。

CaaS具有快速部署一个环境的优点，然而选择CaaS服务商提供的平台上线，有如下痛点：

# UI的简洁

根据[《Docker和DaoCloud纯小白入门手册》][2]一文，理解了Docker的机制，那么就希望快速找到相关的功能并进行操作。在这点上，DaoCloud布局是个非常好的范例。

# 代码仓库支持度
支持的自由程度决定了企业可以将代码仓库放到哪里。可供选择范围越大，企业自由度越大。

# 构建过程
由于有了Docker，开发过程完全可以直接使用CaaS平台进行直观测试，也就是devenv。这要求：与仓库代码集成顺畅无故障，构建所需时间短，构建服务稳定可靠，每个commit都可以执行自动构建。
对于testevn测试环境、对构建无要求，只需要用镜像就可以。
stgenv、prodenv，需要打tag再构建（stgenv使用dev branch，prodenv使用master branch）。
企业私有服务，一定不希望镜像在CaaS上是公开的。这需要CaaS提供选择设置镜像公开或私有。

# 容器
对于容器地理位置，能提供的范围越大越好，毕竟企业服务的客户有可能遍布国内国外。节点质量（比如硬盘使用SSD或普通）越好，当然服务也就越好。但让企业付费时候可以选择节点质量，也是一个很好的商业方式，但对于不想选择的企业，就可能构成麻烦。如果能够对接企业自己建立的节点，对于企业来说就少了一些迁移和部署的麻烦，也就是可以轻松实现混合云。

# 部署
有了镜像后，testenv, stgenv和prodenv都需要能够选择不同版本的镜像以便调入容器运行。对于大规模web应用，架构层级往往比较多，这需要CaaS支持自动编排（yaml配置文件）或手工安排（可视化编排）。而不同的环境(test、stg、prod)以及不同的架构层级，对于端口的映射需求也不同。那么CaaS需要提供不同的端口映射方法。新镜像有了以后，对于dev、test和stg，都需要自动直接部署，部署失败可以干预，而prod就不需要自动部署，必须手工。四个环境都需要可以选择不同的镜像版本来部署，所以CaaS必须提供这个功能。

# 服务
部署为服务的话，一个服务的可用、可靠、可扩展性需要予以考虑。

- 对于可用，需要提供shell允许进到容器去观察和处理一些事务。
- 对于可靠，无需多言，容器当机等现象不允许出现。
- 对于可扩展，有些服务，例如web server, app server，架构能支持横向扩展，CaaS予以容器可自动或手工扩展的实现支持，当然自动最好。自动和手工的选择往往处于商业角度，若自动则付费不可控，若手工则付费可控，所以CaaS应提供选项支持。

相关CaaS服务商测评表格见[《CaaS国内服务商测评》][1]最下方。

[1]: http://adrian-devblog.daoapp.io/2015/09/06/caasguo-nei-fu-wu-shang-ce-ping/
[2]: http://open.daocloud.io/an-explicate-of-docker-and-daocloud/